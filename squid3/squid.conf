####################################################################
# WELCOME TO SQUID-3 High Performance Configuration
# Modifed	: Bandi Shippuden
# Email 	: bandi_shippuden@hackermail.com
# Telp/HP	: 0823-9033-5639
####################################################################
http_port 3127 tproxy
https_port 3129 tproxy ssl-bump generate-host-certificates=on dynamic_cert_mem_cache_size=16MB cert=/etc/squid3/ssl_cert/myCA.pem
http_port 127.0.0.1:3128 ssl-bump generate-host-certificates=on dynamic_cert_mem_cache_size=16MB cert=/etc/squid3/ssl_cert/myCA.pem

####################################################################
#  ACCESS CONTROLS
####################################################################
include /etc/squid3/squid.acl.config

always_direct allow all
ssl_bump server-first all
sslcrtd_program /usr/lib/squid3/ssl_crtd -s /etc/squid3/ssl_db -M 4MB
sslcrtd_children 5
sslproxy_cert_error deny all

####################################################################
# OPTIONS WHICH AFFECT THE NEIGHBOR SELECTION ALGORITHM
####################################################################
hierarchy_stoplist (ini|ui|lst|inf||mh-|sc-|afs.dat|update.txt|vdf.info.gz|captcha|reset.css|gamenotice|ickernew.css|blank.html|infinity.js|renew_session_token.php|recaptcha.js)

####################################################################
# STOREURL PROGRAME
####################################################################
store_id_program /etc/squid3/store-id.pl
store_id_children 20 startup=10 idle=5 concurrency=30
redirect_rewrites_host_header on
redirector_bypass on

####################################################################
# TUNING LUSCA_HEAD-rr14945
####################################################################
# strip_query_terms off yutu
ipcache_size 4048						# 2x Besar RAM 
fqdncache_size 2024						# real RAM Hardware
ipcache_low 98
ipcache_high 99
log_icp_queries off
half_closed_clients off
quick_abort_min 0
quick_abort_max 0
quick_abort_pct 98
vary_ignore_expire on
reload_into_ims on
forwarded_for off
via off
client_db on
client_persistent_connections off
server_persistent_connections off
icp_hit_stale on
query_icmp on
negative_ttl 30 seconds
max_filedescriptors 65536
uri_whitespace strip
shutdown_lifetime 10 seconds
logfile_rotate 2

####################################################################
# ZPH QOS for NO Limit HIT trafick
####################################################################
qos_flows local-hit=0x30

####################################################################
# MEMORY CACHE OPTIONS
####################################################################
cache_mem 32 MB
maximum_object_size_in_memory 1024 KB
memory_replacement_policy heap GDSF
memory_pools off

####################################################################
# DISK CACHE OPTIONS
####################################################################
cache_replacement_policy heap LFUDA
store_dir_select_algorithm round-robin
minimum_object_size 0 bytes
maximum_object_size 10024 MB
cache_swap_low 98
cache_swap_high 99

cache_dir aufs /cache-01 20000 20 256
cache_dir aufs /cache-02 20000 20 256
cache_dir aufs /cache-03 20000 20 256
cache_dir aufs /cache-04 20000 20 256
cache_dir aufs /cache-05 20000 20 256

####################################################################
# PATCH/LOG FILE OPTIONS
####################################################################
access_log /var/log/squid3/access.log
cache_log /var/log/squid3/cache.log
cache_store_log /var/log/squid3/store.log
cache_log /dev/null
cache_store_log /dev/null

pid_filename /var/run/squid3.pid
mime_table /etc/squid3/mime.conf
coredump_dir /var/spool/squid3/
icon_directory /usr/share/squid3/icons
error_directory /usr/share/squid3/errors/en

# refresh pattern configuration here
####################################################################
include /etc/squid3/squid.refresh.config

####################################################################
# DNS OPTIONS jika Menggunakan DNS Unbond/Bind
####################################################################
hosts_file /etc/hosts
dns_nameservers 192.168.10.251

####################################################################
# SNMP OPTIONS
####################################################################
snmp_port 3401
snmp_access allow snmppublic localhost
snmp_access allow snmppublic all

####################################################################
# ADMINISTRATIVE PARAMETERS
####################################################################
cache_mgr bandi.shippuden@gmail.com
cache_effective_user proxy
cache_effective_group proxy
visible_hostname bandi-shippuden.admin.net
unique_hostname bandi-shippuden.admin.net
# End of file